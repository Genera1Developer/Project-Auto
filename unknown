const form = document.getElementById('url-form');
const urlInput = document.getElementById('url-input');
const searchEngine = 'https://google.com/search?q=';

form.addEventListener('submit', async (event) => {
  event.preventDefault();
  let url = urlInput.value.trim();

  if (!url) {
    return;
  }

  if (!url.startsWith('http://') && !url.startsWith('https://')) {
    if (url.includes('.')) {
      url = 'https://' + url;
    } else {
      url = searchEngine + url;
    }
  }

  try {
    window.location.href = __uv$config.prefix + __uv$config.encodeUrl(url);
  } catch (e) {
    console.error(e);
    alert('Failed to proxy URL. Check console for details.');
  }
});