const form = document.getElementById('url-form');
const urlInput = document.getElementById('url-input');
const proxyUrl = '/proxy/'; // Replace with your proxy endpoint

form.addEventListener('submit', async (event) => {
  event.preventDefault();

  let url = urlInput.value.trim();

  if (!url) {
    alert('Please enter a URL.');
    return;
  }

  try {
    // Basic URL validation
    new URL(url);
  } catch (error) {
    url = 'https://' + url; // Attempt to prepend https:// if invalid
    try {
      new URL(url); //Revalidate
    } catch (e) {
      alert('Invalid URL. Please enter a valid URL.');
      return;
    }
  }
    
  window.location.href = proxyUrl + encodeURIComponent(url);
});