self.importScripts('./uv.bundle.js', './uv.config.js');
self.addEventListener('fetch', (event) => {
  try {
    event.respondWith(
      (async () => {
        //console.log('URL:', event.request.url);
        if (event.request.url.startsWith(location.protocol + '//' + location.host + '/service/')) {
          //console.log('Bypass');
          return await fetch(event.request);
        }
        return await uv.fetch(event);
      })()
    );
  } catch (e) {
    console.error(e);
  }
});