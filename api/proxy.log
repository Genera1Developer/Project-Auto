import logging
import datetime
import socket

def log_request(method, url, status_code, response_time, client_ip, content_length=None):
    """Logs proxy requests with detailed information."""
    timestamp = datetime.datetime.now().isoformat()
    log_message = f"{timestamp} - {client_ip} - {method} {url} - Status: {status_code} - Time: {response_time:.2f}s"
    if content_length is not None:
        log_message += f" - Length: {content_length} bytes"
    logging.info(log_message)

def setup_logging(log_file="proxy.log", level=logging.INFO):
    """Sets up basic logging configuration."""
    logging.basicConfig(filename=log_file, level=level,
                        format='%(asctime)s - %(levelname)s - %(message)s',
                        datefmt='%Y-%m-%d %H:%M:%S')

def get_hostname():
    """Gets the hostname of the machine."""
    return socket.gethostname()

if __name__ == '__main__':
    # Example usage (for testing purposes)
    setup_logging()
    hostname = get_hostname()
    log_request("GET", "https://www.example.com", 200, 0.15, "192.168.1.1", 1234)
    log_request("POST", "https://api.example.com/data", 500, 1.23, "10.0.0.5", 56789)
    log_request("PUT", "https://api.example.com/resource", 201, 0.50, "172.16.0.10", 1024)